<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  
  x:Class="MarketingAppHJ.Cliente.Views.Aplicacion.CheckOutPage.CheckOutPage"  
  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"  
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"  
  xmlns:vm="clr-namespace:MarketingAppHJ.Cliente.ViewModels.CheckOutPageViewModel"  
  Title="Checkout"  
  BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundColorLight}, Dark={StaticResource BackgroundColorDark}}"  
  Padding="20">  

   <ContentPage.BindingContext>  
       <vm:CheckOutPageViewModel />  
   </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">

            <!-- Título -->
            <Label Text="Resumen de tu pedido"
             Style="{StaticResource TitleLabelStyle}" />

            <!-- Lista de ítems -->
            <CollectionView ItemsSource="{Binding Items}"
                      SelectionMode="None"
                      HeightRequest="200"
                      EmptyView="No hay artículos en el pedido.">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="*,Auto" Padding="5">
                            <Label Text="{Binding Nombre}"
                     Style="{StaticResource BodyLabelStyle}" />

                            <Label Grid.Column="1"
                     Text="{Binding Total, StringFormat='{}{0:C}'}"
                     Style="{StaticResource BodyLabelStyle}" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Total general -->
            <Label Text="{Binding Total, StringFormat='Total: {0:C}'}"
             Style="{StaticResource SubtitleLabelStyle}"
             HorizontalOptions="End" />

            <!-- Dirección de envío -->
            <Label Text="Dirección de envío"
             Style="{StaticResource SubtitleLabelStyle}" />
            <Editor Text="{Binding DireccionEnvio}"
              HeightRequest="80"
              BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceColorLight}, Dark={StaticResource SurfaceColorDark}}"
              TextColor="{AppThemeBinding Light={StaticResource TextPrimaryColorLight}, Dark={StaticResource TextPrimaryColorDark}}"/>

            <!-- Método de pago -->
            <Label Text="Método de pago"
             Style="{StaticResource SubtitleLabelStyle}" />
            <Picker SelectedItem="{Binding MetodoPago}"
              BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceColorLight}, Dark={StaticResource SurfaceColorDark}}"
              TextColor="{AppThemeBinding Light={StaticResource TextPrimaryColorLight}, Dark={StaticResource TextPrimaryColorDark}}">
                <Picker.Items>
                    <x:String>Tarjeta</x:String>
                    <x:String>PayPal</x:String>
                    <x:String>Contra Reembolso</x:String>
                </Picker.Items>
            </Picker>

            <!-- Botón de confirmación -->
            <Button Text="Confirmar Pedido"
              Command="{Binding RealizarPedidoCommand}"
              Style="{StaticResource PrimaryButtonStyle}"
              Margin="0,10"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>